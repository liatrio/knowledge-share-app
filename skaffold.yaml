apiVersion: skaffold/v1beta3
kind: Config
build:
  artifacts:
  - image: knowledge-share-app
    context: .
    docker: {}
  tagPolicy:
    gitCommit: {}
  local: {}
deploy:
  helm:
    releases:
    - name: knowledge-share-app
      chartPath: charts/knowledge-share-app
      setValueTemplates:
        image.repository: "knowledge-share-app"
        image.tag: "{{ .GIT_COMMIT }}"
profiles:
  - name: jenkins
    build:
      artifacts:
        - image: knowledge-share-app
          context: .
          docker: {}
      tagPolicy:
        envTemplate:
            template: "{{ .DOCKER_REGISTRY }}/liatrio/{{ .IMAGE_NAME }}:{{ .GIT_COMMIT }}"
      local:
        push: true
    deploy: {}

